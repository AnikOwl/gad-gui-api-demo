<!DOCTYPE html>
<html>
  <head>
    <title>ðŸ¦Ž GAD | REST API Testing Survey</title>
    <link rel="icon" href="./data/icons/favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
      integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay"
      crossorigin="anonymous"
    />
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700|Roboto" rel="stylesheet" />
    <link rel="stylesheet" href="css/controls.css" />
    <link rel="stylesheet" href="css/style.css" />
    <style>
      .hidden {
        display: none;
      }
      .selected {
        background-color: yellow;
        border-radius: 10px;
      }
    </style>
  </head>
  <body>
    <header>
      <div style="display: grid; grid-template-columns: 4fr 1fr" class="main-nav-menu">
        <h1 id="menu-main-gui" class="nav-menu"></h1>
      </div>
    </header>
    <div align="center" style="justify-content: center !important; display: flex; align-items: center">
      <div
        class="alert"
        role="alert"
        data-testid="alert-popup"
        id="alertPopup"
        style="position: unset !important; margin: 60px 0px 0px 0px"
      ></div>
    </div>
    <div id="container"></div>
    <div align="center">
      <section>
        <h1>REST API Testing Survey</h1>

        <div id="questionContainer">
          <div id="question-1" class="question" value="rest api testing">
            <h3>Question: Do you have experience in manual REST API testing?</h3>
            <input type="radio" name="rest api testing" value="yes" next="2" />
            <span>Yes</span>
            <input type="radio" name="rest api testing" value="no" next="" />
            <span>No</span>
            <br /><br />
            <button id="buttonNext" onclick="parseQuestion(1)">Next</button>
          </div>
        </div>
      </section>
    </div>
    <script>
      const questions = {
        2: `
            <div id="question-2" class="question" value="rest api tools">
                <h3>Question: Which tools have you used for manual testing of REST API?</h3>
                <input type="radio" name="rest api tools" value="Swagger" next="6"> <span>Swagger</span>
                <input type="radio" name="rest api tools" value="Postman" next="3"> <span>Postman</span>
                <input type="radio" name="rest api tools" value="Bruno" next="6"> <span>Bruno</span>
                <br><br>
                <button id="buttonNext" onclick="parseQuestion(2)">Next</button>
            </div>`,
        3: `
            <div id="question-3" class="question" value="using newman">
                <h3>Question: Have You used Newman?</h3>
                <input type="radio" name="Newman" value="yes" next="4"> <span>Yes</span>
                <input type="radio" name="Newman" value="no" next="4"> <span>No</span>
                <br><br>
                <button id="buttonNext" onclick="parseQuestion(3)">Next</button>
            </div>`,
        4: `
            <div id="question-4" class="question" value="using ci/cd">
                <h3>Question: Have You used CI/CD?</h3>
                <input type="radio" name="ci/cd" value="yes" next="5"> <span>Yes</span>
                <input type="radio" name="ci/cd" value="no" next="99"> <span>No</span>
                <br><br>
                <button id="buttonNext" onclick="parseQuestion(4)">Next</button>
            </div>`,
        5: `
            <div id="question-5" class="question" value="ci/cd tools">
                <h3>Question: Which tools have you used for CI/CD?</h3>
                <input type="checkbox" name="ci/cd tools" value="GitHub Actions" next="99"> <span>GitHub Actions</span>
                <input type="checkbox" name="ci/cd tools" value="Jenkins" next="99"> <span>Jenkins</span>
                <input type="checkbox" name="ci/cd tools" value="Azure DevOps" next="99"> <span>Azure DevOps</span>
                <br><br>
                <button id="buttonNext" onclick="parseQuestion(5)">Next</button>
            </div>`,
        99: `
            <div id="question-99" class="question" value="testing frequency">
                <h3>Question: How often do you perform manual testing?</h3>
                <input type="radio" name="testing frequency" value="daily" next="999"> <span>Daily</span>
                <input type="radio" name="testing frequency" value="weekly" next="999"> <span>Weekly</span>
                <input type="radio" name="testing frequency" value="monthly" next="999"> <span>Monthly</span>
                <br><br>
                <button id="buttonNext" onclick="parseQuestion(99)">Next</button>
            </div>`,
        999: `
            <div id="question-999" class="question" value="999">
                <h3>Thank You for Your answers!</h3>
                <button id="buttonNext" onclick="finish()">Finish</button>
            </div>`,
      };

      const responses = {};

      function parseQuestion(currentId) {
        const currentQuestion = document.getElementById("question-" + currentId);
        let inputValues = [];
        let nextQuestion = "";
        const inputElements = currentQuestion.querySelectorAll("input:checked");

        if (inputElements) {
          inputElements.forEach((inputElement) => {
            inputValues.push(inputElement.value);
            nextQuestion = inputElement.getAttribute("next");
            inputElement.classList.add("selected");
            const labelElement = inputElement.nextElementSibling;
            labelElement.classList.add("selected");
          });
        }

        responses[currentQuestion.getAttribute("value")] = inputValues;

        console.log("inputValue", inputValues);
        console.log("nextQuestion", nextQuestion);
        console.log("responses", responses);

        if (nextQuestion === "" || inputValues.length === 0) {
          return;
        }

        const currentQuestionInputs = document.querySelectorAll(`#question-${currentId} input`);
        currentQuestionInputs.forEach((input) => {
          input.disabled = true;
        });

        const buttonNextElements = document.querySelectorAll("#buttonNext");
        buttonNextElements.forEach((element) => {
          element.style.display = "none";
        });

        addNewQuestion(nextQuestion);
      }

      function addNewQuestion(questionId) {
        const questionContainer = document.getElementById("questionContainer");
        questionContainer.innerHTML += questions[Number(questionId)];
      }

      function finish() {}
    </script>
  </body>
  <script type="text/javascript" src="js/common.js"></script>
  <script type="text/javascript" src="version.js"></script>
  <script type="text/javascript" src="username.js"></script>
</html>
